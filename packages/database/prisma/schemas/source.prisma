// Source module
// Contains source tracking and references

model Source {
  id String @id @default(cuid())

  // URLs associated with this source
  urls URL[]
  
  // Book information (optional)
  book Book? @relation(fields: [bookId], references: [id])
  bookId String?

  // Notes that reference this source
  notes Note[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Website {
  id String @id @default(cuid())

  siteName String?
  domainName String?
  
  // URLs associated with this website
  urls URL[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([domainName])
  @@index([siteName])
}

model URL {
  id String @id @default(cuid())

  author String?
  url String
  lastAccessed DateTime?
  isBrokenLink Boolean @default(false)

  // Website this URL belongs to
  website Website? @relation(fields: [websiteId], references: [id])
  websiteId String?

  // Source this URL belongs to
  source Source @relation(fields: [sourceId], references: [id])
  sourceId String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([url])
  @@index([lastAccessed])
  @@index([isBrokenLink])
}

model Book {
  id String @id @default(cuid())

  title String
  author String?
  publisher String?
  publicationDate DateTime?
  isbn String?

  sources Source[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
} 